local snakeApp = {
    name = "Snake",
    version = "1.0",
    main = "main",
    iconText = "",
    iconTextColor = {0, 255, 0},
    system = false,
    icon = json.decode('[[[150,255,150],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[150,255,150]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,255,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,255,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,255,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,255,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[0,255,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,255,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,200,0],[0,200,0],[0,200,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,255,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,200,0],[0,200,0],[0,200,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,255,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,200,0],[0,200,0],[0,200,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[0,255,0],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[255,60,60],[255,60,60],[255,60,60],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[255,60,60],[255,60,60],[255,60,60],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[255,60,60],[255,60,60],[255,60,60],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[100,200,100],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[30,70,40],[100,200,100]],[[150,255,150],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[100,200,100],[150,255,150]]]'),
    scripts = {
        main = [[
local width, height = MONITOR.resolution.width, MONITOR.resolution.height
local cellSize = 20
local cols, rows = math.floor(width / cellSize), math.floor(height / cellSize)
local fps = 5
local direction = "right"
local nextDirection = "right"
local snake = {}
local food = {}
local gameOver = false
local score = 0
local highScore = 0
local paused = false

for i = 3, 1, -1 do
    table.insert(snake, {x = i, y = 1})
end


function placeFood()
    local validPos = false
    while not validPos do
        food.x = math.random(1, cols)
        food.y = math.random(1, rows)
        
        validPos = true
        for _, segment in ipairs(snake) do
            if segment.x == food.x and segment.y == food.y then
                validPos = false
                break
            end
        end
    end
end

placeFood()

function update()
    if gameOver or paused then return end

    direction = nextDirection

    local head = {x = snake[1].x, y = snake[1].y}
    
    if direction == "right" then head.x = head.x + 1
    elseif direction == "left" then head.x = head.x - 1
    elseif direction == "up" then head.y = head.y - 1
    elseif direction == "down" then head.y = head.y + 1 end

    if head.x < 1 or head.x > cols or head.y < 1 or head.y > rows then
        gameOver = true
        return
    end

    for _, segment in ipairs(snake) do
        if segment.x == head.x and segment.y == head.y then
            gameOver = true
            return
        end
    end

    table.insert(snake, 1, head)

    if head.x == food.x and head.y == food.y then
        score = score + 10
        if score > highScore then
            highScore = score
        end
        placeFood()
    else
        table.remove(snake)
    end
end

function draw()
    GPU:clear()

    for i, segment in ipairs(snake) do
        local color
        if i == 1 then
            color = {0, 200, 0}
        else
            color = {0, 255, 0}
        end
        DRE((segment.x-1)*cellSize, (segment.y-1)*cellSize, cellSize-1, cellSize-1, color)
    end

    DRE((food.x-1)*cellSize, (food.y-1)*cellSize, cellSize-1, cellSize-1, {255, 0, 0})

    DTX(10, 10, "Score: "..score, {255, 255, 255}, 1)
    DTX(width - 150, 10, "High Score: "..highScore, {255, 255, 255}, 1)

    if gameOver then
        DRE(width/2 - 100, height/2 - 30, 200, 60, {50, 50, 50})
        DTX(width/2 - 50, height/2 - 20, "GAME OVER", {255, 0, 0}, 1)
        DTX(width/2 - 80, height/2, "Press R to restart", {255, 255, 255}, 1)
    end

    if paused and not gameOver then
        DRE(width/2 - 80, height/2 - 20, 160, 40, {50, 50, 50})
        DTX(width/2 - 30, height/2 - 10, "PAUSED", {255, 255, 255}, 1)
    end

    DRE(MONITOR.resolution.width - 20, 10, 10, 10, {255, 0, 0})
    DRE(MONITOR.resolution.width - 35, 10, 10, 10, {0, 100, 255})
end

addEvent("keypressed", function(key)
    if gameOver then
        if key == "r" then
            snake = {}
            for i = 3, 1, -1 do
                table.insert(snake, {x = i, y = 1})
            end
            direction = "right"
            nextDirection = "right"
            score = 0
            placeFood()
            gameOver = false
        end
    else
        if key == "p" then
            paused = not paused
        elseif not paused then
            if key == "up" and direction ~= "down" then
                nextDirection = "up"
            elseif key == "down" and direction ~= "up" then
                nextDirection = "down"
            elseif key == "left" and direction ~= "right" then
                nextDirection = "left"
            elseif key == "right" and direction ~= "left" then
                nextDirection = "right"
            end
        end
    end
end)

local lastUpdate = 0
while true do
    local currentTime = love.timer.getTime()
    if currentTime - lastUpdate >= 1/fps then
        if not paused and not gameOver then
            update()
        end
        draw()
        lastUpdate = currentTime
    end
    SLEEP(0.01)
end
]]
    }
}

return snakeApp